<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NUtify - Home</title>
    <link rel="stylesheet" href="studenthome.css" />
    <!--Favicon-->
    <link rel="icon" type="image/x-icon" href="../img/bell.png" />
    <!--Montserrat/Armio-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Arimo:ital,wght@0,400..700;1,400..700&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <!--Bootstrap CSS-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <!--Sidebar-->
    <div class="sidebar" id="sidebar">
      <div class="sidebar-content">
        <div class="sidebar-header">
          <div class="sidebar-logo">
            <img src="../img/NUtifywhite.png" alt="NUtify" class="logo" />
            <div class="chevron-icon" id="menuToggle">
              <img
                src="../feather/chevron-left.svg"
                alt="Collapse"
                class="icon"
              />
            </div>
          </div>
          <div class="sidebar-icon menu-burger" id="menuToggleBurger">
            <img src="../feather/menu.svg" alt="Menu" class="icon" />
          </div>
        </div>

        <div class="sidebar-nav">
          <div class="sidebar-icon active">
            <img src="../feather/home.svg" alt="Home" class="icon" />
            <span class="nav-text">Home</span>
          </div>
          <div class="sidebar-icon">
            <img src="../feather/mail.svg" alt="History" class="icon" />
            <span class="nav-text">History</span>
          </div>
        </div>

        <!--Profile-->
        <div class="sidebar-bottom">
          <div class="user-info">
            <div class="sidebar-avatar">
              <img
                src="../tabler-avatars-1.0.0/jpg/1c9a4dd0bbd964e3eecbd40caf3b7e37.jpg"
                alt="Avatar"
                class="avatar"
              />
            </div>
            <div class="user-details">
              <div class="user-name">John Doe</div>
              <div class="user-role">Student - SACE</div>
            </div>
            <div class="settings-icon" id="settingsToggle">
              <img src="../feather/settings.svg" alt="Settings" class="icon" />
            </div>
          </div>
        </div>
      </div>

      <div class="settings-dropdown" id="settingsDropdown">
        <a href="#" class="dropdown-item">Edit Profile Details</a>
        <a href="../auth/forgot.html" class="dropdown-item">Forgot Password</a>
        <a href="#" class="dropdown-item">Logout</a>
      </div>
    </div>

    <!-- Top Header -->
    <div class="top-header">
      <div class="header-left">
        <h1 class="header-title">Hello, John Doe</h1>
        <p class="header-subtitle">
          Manage your appointments and consultations in one place
        </p>
      </div>
      <div class="header-right">
        <div class="search-container">
          <div class="search-input-wrapper">
            <img src="../feather/menu.svg" alt="Menu" class="menu-icon" />
            <input
              type="text"
              class="search-input"
              placeholder="Search Faculty"
            />
            <img
              src="../feather/search.svg"
              alt="Search"
              class="search-icon-end"
            />
          </div>
        </div>
      </div>
    </div>

    <div class="main-content">
      <!-- Left Column - Appointments -->
      <div class="content-container">
        <div class="left-column">
          <!-- Upcoming Appointments -->
          <div class="appointment-section" id="upcomingAppointments">
            <div class="section-header">
              <h2>Your Upcoming Appointments</h2>
              <button class="see-more-btn" id="seeMoreUpcomingBtn">
                See More
              </button>
            </div>
            <div class="appointment-list">
              <div class="appointment-item">
                <div class="appointment-avatar">
                  <img
                    src="../tabler-avatars-1.0.0/jpg/1c9a4dd0bbd964e3eecbd40caf3b7e37.jpg"
                    alt="Jei Pastrana"
                    class="avatar-img"
                  />
                </div>
                <div class="appointment-info">
                  <div class="appointment-name">Jei Pastrana</div>
                  <div class="appointment-details">Faculty - SACE</div>
                  <div class="appointment-time">June 15 - 09:00 am</div>
                </div>
              </div>

              <div class="appointment-item">
                <div class="appointment-avatar">
                  <img
                    src="../tabler-avatars-1.0.0/jpg/c33237da3438494d1abc67166196484e.jpg"
                    alt="Irene Balmes"
                    class="avatar-img"
                  />
                </div>
                <div class="appointment-info">
                  <div class="appointment-name">Irene Balmes</div>
                  <div class="appointment-details">Faculty - SACE</div>
                  <div class="appointment-time">June 14 - 09:00 am</div>
                </div>
              </div>

              <div class="appointment-item">
                <div class="appointment-avatar">
                  <img
                    src="../tabler-avatars-1.0.0/jpg/1c9a4dd0bbd964e3eecbd40caf3b7e37.jpg"
                    alt="Jei Pastrana"
                    class="avatar-img"
                  />
                </div>
                <div class="appointment-info">
                  <div class="appointment-name">Jei Pastrana</div>
                  <div class="appointment-details">Faculty - SACE</div>
                  <div class="appointment-time">June 15 - 09:00 am</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Completed Sessions -->
          <div class="appointment-section">
            <div class="section-header">
              <h2>Your Most Recent</h2>
              <button class="see-more-btn" id="seeMoreCompletedBtn">
                See More
              </button>
            </div>
            <div class="appointment-list">
              <div class="appointment-item">
                <div class="appointment-avatar">
                  <img
                    src="../tabler-avatars-1.0.0/jpg/1c9a4dd0bbd964e3eecbd40caf3b7e37.jpg"
                    alt="Jei Pastrana"
                    class="avatar-img"
                  />
                </div>
                <div class="appointment-info">
                  <div class="appointment-name">
                    Appointment done - June 24, 2025 - 00:00
                  </div>
                  <div class="appointment-details">
                    Jei Pastrana - Faculty - SACE
                  </div>
                </div>
              </div>

              <div class="appointment-item">
                <div class="appointment-avatar">
                  <img
                    src="../tabler-avatars-1.0.0/jpg/c33237da3438494d1abc67166196484e.jpg"
                    alt="Irene Balmes"
                    class="avatar-img"
                  />
                </div>
                <div class="appointment-info">
                  <div class="appointment-name">
                    Appointment done - June 18, 2025 - 00:00
                  </div>
                  <div class="appointment-details">
                    Irene Balmes - Faculty - SACE
                  </div>
                </div>
              </div>

              <div class="appointment-item">
                <div class="appointment-avatar">
                  <img
                    src="../tabler-avatars-1.0.0/jpg/1c9a4dd0bbd964e3eecbd40caf3b7e37.jpg"
                    alt="Jei Pastrana"
                    class="avatar-img"
                  />
                </div>
                <div class="appointment-info">
                  <div class="appointment-name">
                    Appointment done - June 13, 2025 - 00:00
                  </div>
                  <div class="appointment-details">
                    Jei Pastrana - Faculty - SACE
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Column - Faculty List -->
        <div class="right-column">
          <div class="faculty-section">
            <div class="section-header">
              <h2>All Faculty List</h2>
            </div>
            <div class="faculty-list">
              <div class="faculty-item">
                <div class="faculty-avatar">
                  <img
                    src="../tabler-avatars-1.0.0/jpg/d447a9fd5010652f6c0911fbe9c662c6.jpg"
                    alt="Jayson Guia"
                    class="avatar-img"
                  />
                </div>
                <div class="faculty-info">
                  <div class="faculty-name">Jayson Guia</div>
                  <div class="faculty-department">Faculty - SACE</div>
                </div>
                <div class="faculty-status online"></div>
              </div>

              <div class="faculty-item">
                <div class="faculty-avatar">
                  <img
                    src="../tabler-avatars-1.0.0/jpg/1c9a4dd0bbd964e3eecbd40caf3b7e37.jpg"
                    alt="Jei Pastrana"
                    class="avatar-img"
                  />
                </div>
                <div class="faculty-info">
                  <div class="faculty-name">Jei Pastrana</div>
                  <div class="faculty-department">Faculty - SACE</div>
                </div>
                <div class="faculty-status offline"></div>
              </div>

              <div class="faculty-item">
                <div class="faculty-avatar">
                  <img
                    src="../tabler-avatars-1.0.0/jpg/c33237da3438494d1abc67166196484e.jpg"
                    alt="Irene Balmes"
                    class="avatar-img"
                  />
                </div>
                <div class="faculty-info">
                  <div class="faculty-name">Irene Balmes</div>
                  <div class="faculty-department">Faculty - SACE</div>
                </div>
                <div class="faculty-status online"></div>
              </div>

              <div class="faculty-item">
                <div class="faculty-avatar">
                  <img
                    src="../tabler-avatars-1.0.0/jpg/8940e8ea369def14e82f05a5fee994b9.jpg"
                    alt="Carlo Torres"
                    class="avatar-img"
                  />
                </div>
                <div class="faculty-info">
                  <div class="faculty-name">Carlo Torres</div>
                  <div class="faculty-department">Faculty - SACE</div>
                </div>
                <div class="faculty-status offline"></div>
              </div>

              <div class="faculty-item">
                <div class="faculty-avatar">
                  <img
                    src="../tabler-avatars-1.0.0/jpg/78529e2ec8eb4a2eb2fb961e04915b0a.jpg"
                    alt="Archie Menisis"
                    class="avatar-img"
                  />
                </div>
                <div class="faculty-info">
                  <div class="faculty-name">Archie Menisis</div>
                  <div class="faculty-department">Faculty - SACE</div>
                </div>
                <div class="faculty-status online"></div>
              </div>

              <div class="faculty-item">
                <div class="faculty-avatar">
                  <img
                    src="../tabler-avatars-1.0.0/jpg/869f67a992bb6ca4cb657fb9fc634893.jpg"
                    alt="Michael Joseph Aramil"
                    class="avatar-img"
                  />
                </div>
                <div class="faculty-info">
                  <div class="faculty-name">Michael Joseph Aramil</div>
                  <div class="faculty-department">Faculty - SACE</div>
                </div>
                <div class="faculty-status offline"></div>
              </div>

              <div class="faculty-item">
                <div class="faculty-avatar">
                  <img
                    src="../tabler-avatars-1.0.0/jpg/92770c61168481c94e1ba43df7615fd8.jpg"
                    alt="Erwin De Castro"
                    class="avatar-img"
                  />
                </div>
                <div class="faculty-info">
                  <div class="faculty-name">Erwin De Castro</div>
                  <div class="faculty-department">Faculty - SACE</div>
                </div>
                <div class="faculty-status online"></div>
              </div>

              <div class="faculty-item">
                <div class="faculty-avatar">
                  <img
                    src="../tabler-avatars-1.0.0/jpg/944c5ba154e0489274504f38d01bcfaf.jpg"
                    alt="Joel Enriquez"
                    class="avatar-img"
                  />
                </div>
                <div class="faculty-info">
                  <div class="faculty-name">Joel Enriquez</div>
                  <div class="faculty-department">Faculty - SACE</div>
                </div>
                <div class="faculty-status offline"></div>
              </div>

              <!-- New faculty: Bernie Fabito -->
              <div class="faculty-item">
                <div class="faculty-avatar">
                  <img
                    src="../tabler-avatars-1.0.0/jpg/78529e2ec8eb4a2eb2fb961e04915b0a.jpg"
                    alt="Bernie Fabito"
                    class="avatar-img"
                  />
                </div>
                <div class="faculty-info">
                  <div class="faculty-name">Bernie Fabito</div>
                  <div class="faculty-department">Faculty - SACE</div>
                </div>
                <div class="faculty-status online"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Profile Edit Modal -->
    <div
      class="modal fade"
      id="profileEditModal"
      tabindex="-1"
      aria-labelledby="profileEditModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="profileEditModalLabel">
              Edit Profile Details
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="profile-edit-form">
              <div class="mb-3">
                <label for="username" class="form-label">Username</label>
                <div class="input-group">
                  <img
                    src="../feather/user.svg"
                    alt="User"
                    class="input-icon"
                  />
                  <input
                    type="text"
                    class="form-control"
                    id="username"
                    value="John Doe"
                  />
                </div>
              </div>

              <div class="department-notice">
                <p class="notice-text">
                  If you wish to change your department, first name, or last
                  name. Please go to the nearest admin.
                </p>
                <p class="notice-link">
                  <a href="#" class="text-primary"
                    >See Moderator/ Admin List.</a
                  >
                </p>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" id="saveProfileBtn">
              Save
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Schedule Modal -->
    <div
      class="modal fade"
      id="scheduleModal"
      tabindex="-1"
      aria-labelledby="scheduleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header" style="border-bottom: none">
            <h5 class="modal-title" id="scheduleModalLabel">
              <span id="scheduleFacultyName">Faculty's available times...</span>
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body" style="padding-bottom: 0">
            <div class="schedule-times-container">
              <div class="row g-3" id="scheduleTimesRow">
                <!-- Times will be injected here -->
              </div>
            </div>
          </div>
          <div class="modal-footer" style="border-top: none">
            <button
              type="button"
              class="btn btn-primary schedule-btn"
              id="scheduleBtn"
              style="width: 100%; border-radius: 30px; font-size: 18px"
              disabled
            >
              Schedule
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Success Modal -->
    <div
      class="modal fade"
      id="successModal"
      tabindex="-1"
      aria-labelledby="successModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content" style="border-radius: 20px">
          <div
            class="modal-body text-center"
            style="padding: 40px 30px 30px 30px"
          >
            <h4 style="font-weight: 700; margin-bottom: 18px">
              Requested Appointment Schedule!
            </h4>
            <div style="font-size: 16px; margin-bottom: 32px">
              Please check your History for the Confirmation of your scheduled
              appointment.
            </div>
            <button
              type="button"
              class="btn btn-primary w-100"
              id="goBackBtn"
              style="border-radius: 30px; font-size: 20px; padding: 12px 0"
            >
              Go Back
            </button>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
      crossorigin="anonymous"
    ></script>
    <script src="student.js"></script>
    <script>
      // Demo schedule data for each faculty
      const facultySchedules = {
        "Jayson Guia": [
          "Monday - 9:00 - 10:00",
          "Tuesday - 9:00 - 10:00",
          "Wednesday - 10:00 - 11:00",
          "Thursday - 1:00 - 2:00",
          "Friday - 9:00 - 10:00",
          "Friday - 2:00 - 3:00",
        ],
        "Jei Pastrana": [
          "Monday - 9:00 - 10:00",
          "Tuesday - 9:00 - 10:00",
          "Friday - 9:00 - 10:00",
        ],
        "Irene Balmes": [
          "Monday - 8:00 - 9:00",
          "Tuesday - 10:00 - 11:00",
          "Wednesday - 1:00 - 2:00",
          "Thursday - 3:00 - 4:00",
          "Friday - 11:00 - 12:00",
        ],
        "Carlo Torres": [
          "Monday - 7:00 - 8:00",
          "Tuesday - 8:00 - 9:00",
          "Wednesday - 9:00 - 10:00",
          "Thursday - 10:00 - 11:00",
          "Friday - 1:00 - 2:00",
          "Friday - 3:00 - 4:00",
          "Saturday - 9:00 - 10:00",
        ],
        "Archie Menisis": [
          "Monday - 9:00 - 10:00",
          "Tuesday - 9:00 - 10:00",
          "Wednesday - 9:00 - 10:00",
          "Thursday - 9:00 - 10:00",
          "Friday - 9:00 - 10:00",
        ],
        "Michael Joseph Aramil": [
          "Monday - 8:00 - 9:00",
          "Tuesday - 8:00 - 9:00",
          "Wednesday - 8:00 - 9:00",
          "Thursday - 8:00 - 9:00",
          "Friday - 8:00 - 9:00",
          "Saturday - 8:00 - 9:00",
        ],
        "Erwin De Castro": [
          "Monday - 10:00 - 11:00",
          "Tuesday - 10:00 - 11:00",
          "Wednesday - 10:00 - 11:00",
          "Thursday - 10:00 - 11:00",
          "Friday - 10:00 - 11:00",
        ],
        "Joel Enriquez": [
          "Monday - 2:00 - 3:00",
          "Tuesday - 2:00 - 3:00",
          "Wednesday - 2:00 - 3:00",
          "Thursday - 2:00 - 3:00",
          "Friday - 2:00 - 3:00",
          "Saturday - 2:00 - 3:00",
        ],
      };

      // Show schedule modal on faculty card click
      document.querySelectorAll(".faculty-item").forEach(function (card) {
        card.addEventListener("click", function () {
          var name = card.querySelector(".faculty-name").textContent;
          document.getElementById("scheduleFacultyName").textContent =
            name + "'s available times...";
          var times = facultySchedules[name] || [
            "Monday - 9:00 - 10:00",
            "Tuesday - 9:00 - 10:00",
            "Friday - 9:00 - 10:00",
          ];
          var timesRow = document.getElementById("scheduleTimesRow");
          timesRow.innerHTML = "";
          times.forEach(function (time) {
            var col = document.createElement("div");
            col.className = "col-6";
            col.innerHTML =
              '<div class="schedule-time-card">' + time + "</div>";
            timesRow.appendChild(col);
          });

          // Disable schedule button initially
          var scheduleBtn = document.getElementById("scheduleBtn");
          if (scheduleBtn) scheduleBtn.disabled = true;

          // Remove previous click listeners for scheduleBtn
          scheduleBtn.onclick = null;

          // Add selection logic for schedule cards
          setTimeout(function () {
            var cards = timesRow.querySelectorAll(".schedule-time-card");
            cards.forEach(function (card) {
              card.addEventListener("click", function () {
                cards.forEach(function (c) {
                  c.classList.remove("selected");
                });
                card.classList.add("selected");
                if (scheduleBtn) scheduleBtn.disabled = false;
              });
            });
          }, 0);

          // Add click handler for scheduleBtn to show success modal
          scheduleBtn.onclick = function () {
            var scheduleModal = bootstrap.Modal.getInstance(
              document.getElementById("scheduleModal")
            );
            if (scheduleModal) scheduleModal.hide();
            var successModal = new bootstrap.Modal(
              document.getElementById("successModal")
            );
            successModal.show();
          };

          var modal = new bootstrap.Modal(
            document.getElementById("scheduleModal")
          );
          modal.show();
        });
      });

      // Go Back button in success modal
      document
        .getElementById("goBackBtn")
        .addEventListener("click", function () {
          var successModal = bootstrap.Modal.getInstance(
            document.getElementById("successModal")
          );
          if (successModal) successModal.hide();
        });

      document
        .getElementById("seeMoreUpcomingBtn")
        .addEventListener("click", function () {
          window.location.href = "studenthistory.html?filter=accepted";
        });

      // See More for Completed Sessions: go to history with completed filter
      document
        .getElementById("seeMoreCompletedBtn")
        .addEventListener("click", function () {
          window.location.href = "studenthistory.html?filter=completed";
        });
    </script>
  </body>
</html>
